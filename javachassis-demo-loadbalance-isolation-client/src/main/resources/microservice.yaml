APPLICATION_ID: demo-loadbalance-isolation
service_description:
  name: loadbalance-isolation-client
  version: 0.0.1
  properties:
    allowCrossApp: true
  environment: development
cse:
  service:
    registry:
      address: https://cse.cn-north-1.myhuaweicloud.com:443
      instance:
        watch: false
  config:
    client:
      serverUri: https://cse.cn-north-1.myhuaweicloud.com:443
      refreshMode: 1
      refresh_interval: 5000
  monitor:
    client:
      serverUri: https://cse.cn-north-1.myhuaweicloud.com:443
  rest:
    address: 0.0.0.0:18080
  references:
    loadbalance-isolation-server:
      version-rule: 0.0.0+
  handler:
    chain:
      Consumer:
        default: loadbalance
  loadbalance:
    serverListFilters: darklaunch
    serverListFilter:
      darklaunch:
        className: com.huawei.paas.darklaunch.DarklaunchServerListFilter
    isolation:
      enabled: true
      errorThresholdPercentage: 50
      enableRequestThreshold: 3
      singleTestTime: 5000
      continuousFailureThreshold: 5
    NFLoadBalancerRuleClassName: com.netflix.loadbalancer.RoundRobinRule
  credentials:
    accessKey: ak
    secretKey: sk
    akskCustomCipher: default

servicecomb:
  accesslog:
    enabled: true
    pattern: "%D %h - - %t %r %s %B %SCB-traceId %{server}-header}o %{edgeContext}SCB-ctx %{clientContext}SCB-ctx %{serverContext}SCB-ctx"
